{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"D:\\\\work_files\\\\campaign-viewer\\\\front\\\\pages\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { loadDataRequestAction } from '../reducers/post/actions';\nexport var __N_SSP = true;\nexport var configs = false ? 'campaign-viewer.herokuapp.com' : 'http://localhost:3060';\nexport function parsingStatic(device, brand, content) {\n  // 정적 데이터 주소경로 변경\n  var imgs = document.querySelectorAll('.content-frame img');\n  var videos = document.querySelectorAll('.content-frame video');\n\n  var Parser = function Parser(elem) {\n    elem.forEach(function (val, index) {\n      // image\n      if (elem[index].nodeName == \"IMG\") {\n        var original = elem[index].src;\n        var splitOriginal = original.split(configs, 2);\n\n        if (device == \"web\") {\n          if (elem[index].src.indexOf('https://kibaeksa.github.io/adidasWeb/front/')) {\n            elem[index].src = 'https://kibaeksa.github.io/adidasWeb/front/' + splitOriginal[1];\n          } else {\n            // console.log(original);\n            elem[index].src = original;\n          }\n        } else {\n          if (elem[index].src.indexOf('https://kibaeksa.github.io/adidasMobile/mobile/')) {\n            elem[index].src = 'https://kibaeksa.github.io/adidasMobile/mobile/' + splitOriginal[1];\n          } else {\n            elem[index].src = original;\n          }\n        }\n      } // video\n\n\n      if (elem[index].nodeName == \"VIDEO\") {\n        var _original = elem[index].poster;\n\n        var _splitOriginal = _original.split(configs, 2);\n\n        if (device == \"web\") {\n          if (elem[index].poster.indexOf('https://kibaeksa.github.io/adidasWeb/front/')) {\n            elem[index].poster = 'https://kibaeksa.github.io/adidasWeb/front/' + _splitOriginal[1];\n          } else {\n            elem[index].poster = _original;\n          }\n        } else {\n          if (elem[index].poster.indexOf('https://kibaeksa.github.io/adidasMobile/mobile/')) {\n            elem[index].poster = 'https://kibaeksa.github.io/adidasMobile/mobile/' + _splitOriginal[1];\n          } else {\n            elem[index].poster = _original;\n          }\n        }\n      }\n    });\n  };\n\n  new Parser(imgs);\n  new Parser(videos); // JS, CSS 추가하는 인클루드 객체\n\n  var Include = {\n    getArray: function getArray(files) {\n      var array = new Array();\n      var item = files.split(',');\n      item.forEach(function (fileName, index) {\n        fileName = fileName.replace(/^\\s/, '').replace(/\\s$/, '');\n        array.push(fileName);\n      });\n      return array;\n    },\n    JS: function JS(files) {\n      this.getArray(files).forEach(function (fileName, index) {\n        var JS = document.createElement('script');\n        JS.type = 'text/javascript';\n        JS.src = '/js/' + fileName + '.js';\n        JS.classList.add('putScriptClass');\n        document.getElementsByTagName('head')[0].appendChild(JS);\n      });\n    },\n    CSS: function CSS(files) {\n      this.getArray(files).forEach(function (fileName, index) {\n        var CSS = document.createElement('link');\n        CSS.rel = 'stylesheet';\n        CSS.type = 'text/css';\n        CSS.classList.add('putCssClass');\n        CSS.href = '/css/' + fileName + '.css';\n        CSS.media = 'screen';\n        document.getElementsByTagName('head')[0].appendChild(CSS);\n      });\n    }\n  }; // 인클루드 동적 삽입\n\n  if (device == \"web\") {\n    var scripts = document.getElementsByTagName('head')[0].getElementsByTagName('script');\n\n    for (var i = 0; i < scripts.length; i++) {\n      if (scripts[i].classList.contains(\"putScriptClass\")) {\n        scripts[i].remove();\n      }\n    }\n\n    var css = document.getElementsByTagName('head')[0].getElementsByTagName('link');\n\n    for (var i = 0; i < css.length; i++) {\n      if (css[i].classList.contains(\"putCssClass\")) {\n        css[i].remove();\n      }\n    }\n\n    if (brand == \"adidas\") {\n      Include.JS('modalPopup.min, adidas');\n      Include.CSS('slick, adidas_r, reset');\n    }\n\n    if (brand == \"reebok\") {\n      Include.JS('modalPopup.min, common');\n      Include.CSS('slick, reebok, reset, common');\n    }\n  }\n\n  if (device == \"mobile\") {\n    var _scripts = document.getElementsByTagName('head')[0].getElementsByTagName('script');\n\n    for (var i = 0; i < _scripts.length; i++) {\n      if (_scripts[i].classList.contains(\"putScriptClass\")) {\n        _scripts[i].remove();\n      }\n    }\n\n    var _css = document.getElementsByTagName('head')[0].getElementsByTagName('link');\n\n    for (var i = 0; i < _css.length; i++) {\n      if (_css[i].classList.contains(\"putCssClass\")) {\n        _css[i].remove();\n      }\n    }\n\n    if (brand == \"adidas\") {\n      Include.JS('modalPopup.min, adidas');\n      Include.CSS('slick, style, fonts, style_reebok');\n    }\n\n    if (brand == \"reebok\") {\n      Include.JS('modalPopup.min');\n      Include.CSS('slick, style, fonts, reebok_m, style_rm, common_rm');\n    }\n  } // Axios 통신으로 렌더링 후 배경스타일 관련 데이터 리로드: backend에서 가공 후 response.\n\n\n  if (device == \"web\" && brand == \"adidas\") {\n    // 캠페인 내부 스크립트\n    if (content.script) {\n      var scriptLength = document.querySelectorAll('#container_r script').length;\n      document.querySelectorAll('#container_r script')[scriptLength - 1].remove();\n      var JS = document.createElement('script');\n      document.querySelectorAll('#container_r script')[scriptLength - 2].after(JS);\n      document.querySelectorAll('#container_r script')[scriptLength - 1].append(content.script);\n    } // 캠페인 내부 스타일\n\n\n    if (content.bg) {\n      var bgLength = document.querySelectorAll('#container_r style').length;\n      document.querySelectorAll('#container_r style')[bgLength - 1].remove();\n      var STYLE = document.createElement('style');\n      document.querySelector('#container_r div').prepend(STYLE);\n      document.querySelectorAll('#container_r style')[0].append(content.bg);\n    }\n  }\n\n  if (device == \"mobile\" && brand == \"adidas\") {\n    if (content.script) {\n      var _scriptLength = document.querySelectorAll('#container script').length;\n\n      document.querySelectorAll('#container script')[_scriptLength - 1].remove();\n\n      var _JS = document.createElement('script');\n\n      document.querySelectorAll('#container script')[_scriptLength - 2].after(_JS);\n\n      document.querySelectorAll('#container script')[_scriptLength - 1].append(content.script);\n    }\n\n    if (content.bg) {\n      var _bgLength = document.querySelectorAll('#container style').length;\n\n      document.querySelectorAll('#container style')[_bgLength - 1].remove();\n\n      var _STYLE = document.createElement('style');\n\n      document.querySelector('#container div').prepend(_STYLE);\n      document.querySelectorAll('#container style')[0].append(content.bg);\n    }\n  }\n\n  if (device == \"web\" && brand == \"reebok\") {\n    if (content.script) {\n      var _scriptLength2 = document.querySelectorAll('#contents_wrap script').length;\n\n      document.querySelectorAll('#contents_wrap script')[_scriptLength2 - 1].remove();\n\n      var _JS2 = document.createElement('script');\n\n      document.querySelectorAll('#contents_wrap script')[_scriptLength2 - 2].after(_JS2);\n\n      document.querySelectorAll('#contents_wrap script')[_scriptLength2 - 1].append(content.script);\n    }\n\n    if (content.bg) {\n      var _bgLength2 = document.querySelectorAll('#contents_wrap style').length;\n\n      document.querySelectorAll('#contents_wrap style')[_bgLength2 - 1].remove();\n\n      var _STYLE2 = document.createElement('style');\n\n      document.querySelector('#contents_wrap div').append(_STYLE2);\n      document.querySelectorAll('#contents_wrap style')[0].append(content.bg);\n    }\n  }\n\n  if (device == \"mobile\" && brand == \"reebok\") {\n    if (content.script) {\n      var _scriptLength3 = document.querySelectorAll('#contents script').length;\n\n      document.querySelectorAll('#contents script')[_scriptLength3 - 1].remove();\n\n      var _JS3 = document.createElement('script');\n\n      document.querySelectorAll('#contents script')[_scriptLength3 - 2].after(_JS3);\n\n      document.querySelectorAll('#contents script')[_scriptLength3 - 1].append(content.script);\n    }\n\n    if (content.bg) {\n      var _bgLength3 = document.querySelectorAll('#contents style').length;\n\n      document.querySelectorAll('#contents style')[_bgLength3 - 1].remove();\n\n      var _STYLE3 = document.createElement('style');\n\n      document.querySelector('#contents div').prepend(_STYLE3);\n      document.querySelectorAll('#contents style')[0].append(content.bg);\n    }\n  }\n}\n\nvar Home = function Home() {\n  _s();\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      content = _useSelector.content,\n      device = _useSelector.device,\n      brand = _useSelector.brand;\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (content) {\n      parsingStatic(device, brand, content);\n      dispatch(loadDataRequestAction());\n    }\n  }, [device, brand, content]);\n\n  function htmls() {\n    if (content) {\n      return {\n        __html: content.pn\n      };\n    }\n  }\n\n  ;\n  return __jsx(React.Fragment, null, content ? __jsx(\"div\", {\n    dangerouslySetInnerHTML: htmls(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 24\n    }\n  }) : __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 70\n    }\n  }, \"\\uC544\\uB514\\uB2E4\\uC2A4 \\uC6F9\"));\n};\n\n_s(Home, \"qB51306F/MRrQ84+QCHCGTa5pDc=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/work_files/campaign-viewer/front/pages/index.tsx"],"names":["React","useEffect","useSelector","useDispatch","loadDataRequestAction","configs","parsingStatic","device","brand","content","imgs","document","querySelectorAll","videos","Parser","elem","forEach","val","index","nodeName","original","src","splitOriginal","split","indexOf","poster","Include","getArray","files","array","Array","item","fileName","replace","push","JS","createElement","type","classList","add","getElementsByTagName","appendChild","CSS","rel","href","media","scripts","i","length","contains","remove","css","script","scriptLength","after","append","bg","bgLength","STYLE","querySelector","prepend","Home","state","post","dispatch","htmls","__html","pn"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { RootState } from '../reducers';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { GetServerSideProps } from 'next';\r\nimport { END } from 'redux-saga';\r\nimport wrapper, { SagaStore } from '../store/configureStore';\r\nimport { checkBrandRequestAction, loadDataRequestAction, setHoverAction } from '../reducers/post/actions';\r\n\r\nexport const configs = process.env.NODE_ENV === 'production' ? 'campaign-viewer.herokuapp.com' : 'http://localhost:3060';\r\nexport function parsingStatic(device, brand, content) {\r\n    // 정적 데이터 주소경로 변경\r\n    const imgs = document.querySelectorAll('.content-frame img');\r\n    const videos = document.querySelectorAll('.content-frame video');\r\n    const Parser = ( elem ) => {\r\n        elem.forEach( function ( val, index ){\r\n            // image\r\n            if( elem[ index ].nodeName == \"IMG\" ) {\r\n                const original = elem[ index ].src;\r\n                const splitOriginal = original.split(configs, 2);\r\n                if( device == \"web\" ) {\r\n                    if( elem[ index ].src.indexOf('https://kibaeksa.github.io/adidasWeb/front/')) {\r\n                        elem[ index ].src = 'https://kibaeksa.github.io/adidasWeb/front/' + splitOriginal[1];\r\n                    } else {\r\n                        // console.log(original);\r\n                        elem[ index ].src = original;\r\n                    }\r\n                } else {\r\n                    if( elem[ index ].src.indexOf('https://kibaeksa.github.io/adidasMobile/mobile/')) {\r\n                        elem[ index ].src = 'https://kibaeksa.github.io/adidasMobile/mobile/' + splitOriginal[1];\r\n                    } else {\r\n                        elem[ index ].src = original;\r\n                    }\r\n                }\r\n            }\r\n            // video\r\n            if( elem[ index ].nodeName == \"VIDEO\" ) {\r\n                const original = elem[ index ].poster;\r\n                const splitOriginal = original.split(configs, 2);\r\n                if ( device == \"web\" ) {\r\n                    if( elem[ index ].poster.indexOf('https://kibaeksa.github.io/adidasWeb/front/')) {\r\n                        elem[ index ].poster = 'https://kibaeksa.github.io/adidasWeb/front/' + splitOriginal[1];\r\n                    } else {\r\n                        elem[ index ].poster = original;\r\n                    }\r\n                } else {\r\n                    if( elem[ index ].poster.indexOf('https://kibaeksa.github.io/adidasMobile/mobile/')) {\r\n                        elem[ index ].poster = 'https://kibaeksa.github.io/adidasMobile/mobile/' + splitOriginal[1];\r\n                    } else {\r\n                        elem[ index ].poster = original;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }            \r\n    new Parser( imgs );\r\n    new Parser( videos );\r\n\r\n    // JS, CSS 추가하는 인클루드 객체\r\n    const Include = {\r\n        getArray: function ( files ){\r\n            const array = new Array();\r\n            const item = files.split(',');\r\n            item.forEach(function ( fileName, index ){\r\n                fileName = fileName.replace(/^\\s/, '').replace(/\\s$/, '');\r\n                array.push(fileName);\r\n            });\r\n            return array;\r\n        },\r\n        JS: function ( files ){\r\n            this.getArray( files ).forEach(function ( fileName, index ){\r\n                let JS  = document.createElement('script');\r\n                JS.type = 'text/javascript';\r\n                JS.src  = '/js/' + fileName + '.js';\r\n                JS.classList.add('putScriptClass');\r\n                document.getElementsByTagName('head')[0].appendChild(JS);\r\n            });\r\n        },\r\n        CSS: function ( files ){\r\n            this.getArray(files).forEach(function ( fileName, index ){\r\n                let CSS   = document.createElement('link');\r\n                CSS.rel   = 'stylesheet';\r\n                CSS.type  = 'text/css';\r\n                CSS.classList.add('putCssClass');\r\n                CSS.href  = '/css/' + fileName + '.css';\r\n                CSS.media = 'screen';\r\n                document.getElementsByTagName('head')[0].appendChild( CSS );\r\n            });\r\n        }\r\n    };\r\n    \r\n    // 인클루드 동적 삽입\r\n    if( device == \"web\" ) {\r\n        const scripts = document.getElementsByTagName('head')[0].getElementsByTagName('script');\r\n        for (var i = 0; i < scripts.length; i++) {\r\n            if (scripts[i].classList.contains(\"putScriptClass\")) {\r\n                scripts[i].remove();\r\n            }        \r\n        }\r\n        const css = document.getElementsByTagName('head')[0].getElementsByTagName('link');\r\n        for (var i = 0; i < css.length; i++) {\r\n            if (css[i].classList.contains(\"putCssClass\")) {\r\n                css[i].remove();\r\n            }        \r\n        }\r\n        if( brand == \"adidas\" ) {\r\n            Include.JS('modalPopup.min, adidas');\r\n            Include.CSS('slick, adidas_r, reset');\r\n        }\r\n        if( brand == \"reebok\" ){\r\n            Include.JS('modalPopup.min, common');\r\n            Include.CSS('slick, reebok, reset, common');\r\n        }\r\n    }\r\n    if( device == \"mobile\" ) {\r\n        const scripts = document.getElementsByTagName('head')[0].getElementsByTagName('script');\r\n        for (var i = 0; i < scripts.length; i++) {\r\n            if (scripts[i].classList.contains(\"putScriptClass\")) {\r\n                scripts[i].remove();\r\n            }        \r\n        }\r\n        const css = document.getElementsByTagName('head')[0].getElementsByTagName('link');\r\n        for (var i = 0; i < css.length; i++) {\r\n            if (css[i].classList.contains(\"putCssClass\")) {\r\n                css[i].remove();\r\n            }        \r\n        }\r\n        if( brand == \"adidas\" ) {\r\n            Include.JS('modalPopup.min, adidas');\r\n            Include.CSS('slick, style, fonts, style_reebok');\r\n        }\r\n        if( brand == \"reebok\" ){\r\n            Include.JS('modalPopup.min');\r\n            Include.CSS('slick, style, fonts, reebok_m, style_rm, common_rm');\r\n        }\r\n    }\r\n\r\n    // Axios 통신으로 렌더링 후 배경스타일 관련 데이터 리로드: backend에서 가공 후 response.\r\n    if( device == \"web\" && brand == \"adidas\" ) {\r\n        // 캠페인 내부 스크립트\r\n        if( content.script ) {\r\n            const scriptLength = document.querySelectorAll('#container_r script').length;\r\n            document.querySelectorAll('#container_r script')[scriptLength-1].remove();\r\n            const JS  = document.createElement('script');\r\n            document.querySelectorAll('#container_r script')[scriptLength-2].after(JS);\r\n            document.querySelectorAll('#container_r script')[scriptLength-1].append(content.script);\r\n        }\r\n        // 캠페인 내부 스타일\r\n        if( content.bg ) {\r\n            const bgLength = document.querySelectorAll('#container_r style').length;\r\n            document.querySelectorAll('#container_r style')[bgLength-1].remove();\r\n            const STYLE  = document.createElement('style');\r\n            document.querySelector('#container_r div').prepend(STYLE);\r\n            document.querySelectorAll('#container_r style')[0].append(content.bg);\r\n        }\r\n    }\r\n    if( device == \"mobile\" && brand == \"adidas\" ) {\r\n        if( content.script ) {\r\n            const scriptLength = document.querySelectorAll('#container script').length;\r\n            document.querySelectorAll('#container script')[scriptLength-1].remove();\r\n            const JS  = document.createElement('script');\r\n            document.querySelectorAll('#container script')[scriptLength-2].after(JS);\r\n            document.querySelectorAll('#container script')[scriptLength-1].append(content.script);\r\n        }\r\n        if( content.bg ) {\r\n            const bgLength = document.querySelectorAll('#container style').length;\r\n            document.querySelectorAll('#container style')[bgLength-1].remove();\r\n            const STYLE  = document.createElement('style');\r\n            document.querySelector('#container div').prepend(STYLE);\r\n            document.querySelectorAll('#container style')[0].append(content.bg);\r\n        }\r\n    }\r\n    if( device == \"web\" && brand == \"reebok\" ) {\r\n        if( content.script ) {\r\n            const scriptLength = document.querySelectorAll('#contents_wrap script').length;\r\n            document.querySelectorAll('#contents_wrap script')[scriptLength-1].remove();\r\n            const JS  = document.createElement('script');\r\n            document.querySelectorAll('#contents_wrap script')[scriptLength-2].after(JS);\r\n            document.querySelectorAll('#contents_wrap script')[scriptLength-1].append(content.script);\r\n        }\r\n        if( content.bg ) {\r\n            const bgLength = document.querySelectorAll('#contents_wrap style').length;\r\n            document.querySelectorAll('#contents_wrap style')[bgLength-1].remove();\r\n            const STYLE  = document.createElement('style');\r\n            document.querySelector('#contents_wrap div').append(STYLE);\r\n            document.querySelectorAll('#contents_wrap style')[0].append(content.bg);\r\n        }\r\n    }\r\n    if( device == \"mobile\" && brand == \"reebok\" ) {\r\n        if( content.script ) {\r\n            const scriptLength = document.querySelectorAll('#contents script').length;\r\n            document.querySelectorAll('#contents script')[scriptLength-1].remove();\r\n            const JS  = document.createElement('script');\r\n            document.querySelectorAll('#contents script')[scriptLength-2].after(JS);\r\n            document.querySelectorAll('#contents script')[scriptLength-1].append(content.script);\r\n        }\r\n        if( content.bg ) {\r\n            const bgLength = document.querySelectorAll('#contents style').length;\r\n            document.querySelectorAll('#contents style')[bgLength-1].remove();\r\n            const STYLE  = document.createElement('style');\r\n            document.querySelector('#contents div').prepend(STYLE);\r\n            document.querySelectorAll('#contents style')[0].append(content.bg);\r\n        }\r\n    }\r\n}\r\n\r\nconst Home: React.FunctionComponent = () => {\r\n    const { content, device, brand } = useSelector((state: RootState) => state.post);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        if( content ) {\r\n            parsingStatic(device, brand, content);\r\n            dispatch(loadDataRequestAction());\r\n        }\r\n    }, [device, brand, content]);\r\n    \r\n    function htmls () {\r\n        if( content ) {\r\n            return { __html: content.pn };\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            {content ? <div dangerouslySetInnerHTML={ htmls() } /> : <div>아디다스 웹</div>}\r\n\r\n        </>\r\n    );\r\n};\r\n\r\nexport const getServerSideProps: GetServerSideProps = wrapper.getServerSideProps( async( context ) => {\r\n    context.store.dispatch(checkBrandRequestAction('web', 'adidas'));\r\n    context.store.dispatch(setHoverAction('01'));\r\n    context.store.dispatch(loadDataRequestAction());\r\n    // const state = context.store.getState();\r\n    // if( state.post.content ) {\r\n    // }\r\n    // const isServer: boolean = !!context.req;\r\n    // const cookie = isServer ? context.req.headers.cookie : '';\r\n    // console.log(isServer,'여기여기');\r\n    // if ( context.req && cookie ) axios.defaults.headers.Cookie = cookie;\r\n    context.store.dispatch( END );\r\n    await (context.store as SagaStore).sagaTask.toPromise();\r\n    return { \r\n        props: {\r\n            pathname: '/',\r\n        }\r\n    };\r\n});\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}